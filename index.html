<!DOCTYPE html>
<html>
<head>
    <title>Capture Photo</title>
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1"/>

    <script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
   <script>

       var pushNotification;

       document.addEventListener('deviceready', onDeviceReady, true);

       function onDeviceReady() {

           try {
               pushNotification = window.plugins.pushNotification;
               if (device.platform == 'android' || device.platform == 'Android') {
                   pushNotification.register(successHandler, errorHandler, { "senderID": "123456789", "ecb": "onNotificationGCM" });    // required!
               }
               else {
                   pushNotification.register(tokenHandler, errorHandler, { "badge": "true", "sound": "true", "alert": "true", "ecb": "onNotificationAPN" }); // required!
               }
           }
           catch (err) {
               txt = "There was an error on this page.\n\n";
               txt += "Error description: " + err.message + "\n\n";
               alert(txt);
           }
       };

       // handle GCM notifications for Android
       function onNotificationGCM(e) {
           switch (e.event) {
               case 'registered':
                   if (e.regid.length > 0) {
                       alert(e.regid);
                       storeToken(e.regid);
                   }
                   break;

               case 'message':
                   if (e.foreground) {
                       var my_media = new Media("beep.wav");
                       my_media.play();
                   }
                   else {
                       // otherwise we were launched because the user touched a notification in the notification tray.
                   }

                   break;

               case 'error':
                   break;
               default:
                   break;
           }
       }

/*       function alertDismissed() {
           // do something
       }

       navigator.notification.alert(
               'You are the winner!',  // message
               alertDismissed,         // callback
               'Game Over',            // title
               'Done'                  // buttonName
       );*/

/*        function addContact(){
            var dc = navigator.contacts.create();
            dc.displayName = "Daves Pizza";
            var name = new ContactName();
            name.givenName = "Dave";
            name.familyName = "Pizza";
            dc.name = name;
            var phoneNumbers = [];
            phoneNumbers[0] = new ContactField('work', '212-555-1234', false);
            dc.phoneNumbers = phoneNumbers;

            // save
            dc.save();
        }

        var deviceReadyDeferred = $.Deferred();
        var jqmReadyDeferred = $.Deferred();

        document.addEventListener("deviceReady", deviceReady, false);

        function deviceReady() {
            deviceReadyDeferred.resolve();
        }

        $(document).one("mobileinit", function () {
            jqmReadyDeferred.resolve();
        });

        $.when(deviceReadyDeferred, jqmReadyDeferred).then(doWhenBothFrameworksLoaded);

        function doWhenBothFrameworksLoaded() {
            var    pictureSource=navigator.camera.PictureSourceType;
            var    destinationType=navigator.camera.DestinationType;

            // Called when a photo is successfully retrieved
            //
            function onPhotoDataSuccess(imageData) {
                // Get image handle
                //
                var smallImage = document.getElementById('smallImage');

                // Unhide image elements
                //
                smallImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                smallImage.src = "data:image/jpeg;base64," + imageData;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoFileSuccess(imageData) {
                // Get image handle
                console.log(JSON.stringify(imageData));

                // Get image handle
                //
                var smallImage = document.getElementById('smallImage');

                // Unhide image elements
                //
                smallImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                smallImage.src = imageData;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                // Uncomment to view the image file URI
                // console.log(imageURI);

                // asdfGet image handle
                //
                var largeImage = document.getElementById('largeImage');

                // Unhide image elements
                //
                largeImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                largeImage.src = imageURI;
            }

            // A button will call this function
            //
            function capturePhotoWithData() {
                // Take picture using device camera and retrieve image as base64-encoded string
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
            }

            $("#capture").on("click", function() {
                navigator.camera.getPicture(onPhotoFileSuccess, onFail, { quality: 50, destinationType: Camera.DestinationType.FILE_URI });
            });

            // A button will call this function
            //
            function getPhoto(source) {
                // Retrieve image file location from specified source
                navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
                    destinationType: destinationType.FILE_URI,
                    sourceType: source });
            }

            // Called if something bad happens.
            //
            function onFail(message) {
                alert('Failed because: ' + message);
            }

            $("#captureWithData").on("click", function(){
                capturePhotoWithData();
            })

        }*/
    </script>


</head>
<body>
<p>Lara Here</p>
<button id="captureWithData">Capture Photo With Image Data</button> <br>
<button id="capture">Capture Photo With Image File URI</button> <br>
<!--<button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
<button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
<button onclick="addContact();">Add Contact</button>-->
<img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
<img style="display:none;" id="largeImage" src="" />
</body>
</html>